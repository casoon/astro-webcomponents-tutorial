---
interface Props {
  id: string;
  items: Array<{ title: string; content: string }>;
  allowMultiple?: boolean;
}

const { id, items, allowMultiple = false } = Astro.props;
---

<div id={id} class="accordion" data-allow-multiple={allowMultiple}>
  {items.map((item, index) => (
    <div class="accordion-item" data-accordion-item>
      <button
        class="accordion-trigger"
        aria-expanded="false"
        aria-controls={`${id}-content-${index}`}
      >
        <span>{item.title}</span>
        <span class="icon">+</span>
      </button>
      <div
        id={`${id}-content-${index}`}
        class="accordion-content"
        hidden
      >
        <div class="accordion-body">
          <Fragment set:html={item.content} />
        </div>
      </div>
    </div>
  ))}
</div>

<style>
  .accordion {
    border: 1px solid #e5e7eb;
    border-radius: 12px;
    overflow: hidden;
  }

  .accordion-item {
    border-bottom: 1px solid #e5e7eb;
  }

  .accordion-item:last-child {
    border-bottom: none;
  }

  .accordion-trigger {
    display: flex;
    justify-content: space-between;
    align-items: center;
    width: 100%;
    padding: 1rem 1.5rem;
    border: none;
    background: white;
    font-size: 1rem;
    font-weight: 500;
    text-align: left;
    cursor: pointer;
    transition: background 0.2s;
  }

  .accordion-trigger:hover {
    background: #f9fafb;
  }

  .accordion-trigger[aria-expanded="true"] {
    background: #f3f4f6;
  }

  .icon {
    font-size: 1.25rem;
    color: #6b7280;
    transition: transform 0.2s;
  }

  .accordion-trigger[aria-expanded="true"] .icon {
    transform: rotate(45deg);
  }

  .accordion-content[hidden] {
    display: none;
  }

  .accordion-body {
    padding: 1rem 1.5rem 1.5rem;
    color: #4b5563;
  }
</style>
